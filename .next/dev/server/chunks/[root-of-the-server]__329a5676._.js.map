{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///H:/Dhaka%20Election%20Map/v0-dhaka-election-heatmap/app/api/submit-candidate/route.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\"\r\nimport { NextRequest, NextResponse } from \"next/server\"\r\n\r\nconst supabaseUrl = process.env.SUPABASE_URL\r\nconst supabaseAnonKey = process.env.SUPABASE_ANON_KEY\r\n\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n  throw new Error(\"Missing Supabase credentials\")\r\n}\r\n\r\nconst supabase = createClient(supabaseUrl, supabaseAnonKey)\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const { candidateName, partyName, seatNumber } = await request.json()\r\n\r\n    // Validate input\r\n    if (!candidateName || !partyName || !seatNumber) {\r\n      return NextResponse.json({ error: \"Missing required fields\" }, { status: 400 })\r\n    }\r\n\r\n    // Insert into Supabase table\r\n    const { data, error } = await supabase.from(\"candidate_submissions\").insert([\r\n      {\r\n        candidate_name: candidateName,\r\n        party_name: partyName,\r\n        seat_number: seatNumber,\r\n        created_at: new Date().toISOString(),\r\n      },\r\n    ])\r\n\r\n    if (error) {\r\n      console.error(\"Supabase error:\", error)\r\n      return NextResponse.json({ error: error.message }, { status: 500 })\r\n    }\r\n\r\n    return NextResponse.json(\r\n      { success: true, message: \"Candidate submitted successfully\", data },\r\n      { status: 201 }\r\n    )\r\n  } catch (err) {\r\n    console.error(\"API error:\", err)\r\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,YAAY;AAC5C,MAAM,kBAAkB,QAAQ,GAAG,CAAC,iBAAiB;AAErD,IAAI,CAAC,eAAe,CAAC,iBAAiB;IACpC,MAAM,IAAI,MAAM;AAClB;AAEA,MAAM,WAAW,IAAA,yLAAY,EAAC,aAAa;AAEpC,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,aAAa,EAAE,SAAS,EAAE,UAAU,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEnE,iBAAiB;QACjB,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,YAAY;YAC/C,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,6BAA6B;QAC7B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,yBAAyB,MAAM,CAAC;YAC1E;gBACE,gBAAgB;gBAChB,YAAY;gBACZ,aAAa;gBACb,YAAY,IAAI,OAAO,WAAW;YACpC;SACD;QAED,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,mBAAmB;YACjC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,MAAM,OAAO;YAAC,GAAG;gBAAE,QAAQ;YAAI;QACnE;QAEA,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAM,SAAS;YAAoC;QAAK,GACnE;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,cAAc;QAC5B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF"}}]
}